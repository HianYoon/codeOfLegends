<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="signup">

	<select id="isEmptyData" parameterType="map" resultType="_int">
		SELECT COUNT(*) FROM MEMBER WHERE ${target} = #{data}
	</select>
	
	<select id="getSeqMemberKeyNextVal" resultType="_int">
		SELECT SEQ_MEMBER_KEY.NEXTVAL FROM DUAL
	</select>
	
	<insert id="insertMember" parameterType="member">
		INSERT INTO MEMBER(MEMBER_KEY,ID,PASSWORD,USERNAME,NICKNAME,PHONE,EMAIL,IS_SUBSCRIBED) 
		VALUES(#{memberKey},#{id},#{password},#{userName},#{nickname},#{phone},#{email},#{isSubscribed})
	</insert>
	
	<insert id="sendEmailVerification" parameterType="map">
		INSERT INTO EMAIL_CHECK(MEMBER_KEY,CONFIRMATION_KEY)
		VALUES(${memberKey},#{confirmationKey})
	</insert>
</mapper>
