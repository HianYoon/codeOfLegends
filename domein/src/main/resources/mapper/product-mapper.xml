<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="product">

		<insert parameterType="boardProductSaleContent" id="insertBoardSContent">
			insert into BOARD_DIRECT_SALE values(SEQ_article_No.nextval,
			#{title},
			#{businessKey},
			SYSDATE,
			SYSDATE,
			#{saleContent},
			default,
			'1'	
			)
	<!-- 	<selectKey order="AFTER" resultType="_int" keyProperty="aticleNo">
				SELECT SEQ_article_No.CURRVAL FROM DUAL
			</selectKey> -->
	<!-- 		<selectKey order="BEFORE" resultType="_int" keyProperty="businessKey">
				select b.business_key from business b, member m where  m.member_key=b.business_key
			</selectKey> -->
		</insert>
		
		<insert parameterType="product" id="insertProduct">
			INSERT INTO DIRECT_SALE_PRODUCT VALUES(SEQ_PRODUCT_NO.NEXTVAL,
			#{productName},
			#{productQuality},
			#{origin},
			#{productQuantity},
			#{measureUnit},
			#{price},
			#{remaningQuantity},
			#{articleNo},
			${productStatusNo} 
			) 
				<!-- 시작전에 artcleno를 가져오기위한 outjoin문 -->
				<selectKey order="AFTER" resultType="_int" keyProperty="productNo">
					SELECT SEQ_PRODUCT_NO.CURRVAL FROM DUAL
				</selectKey>
		</insert> 
		
		<insert parameterType="attachement" id="insertAttachement">
			INSERT INTO BDS_ATTACHED_IMAGE VALUES(#{productNo},
			SEQ_PRODUCT_IMAGE_NO.NEXTVAL,
			#{origin_File_name},
			#{renamed_File_name}
			)
		 </insert> 
		
</mapper>